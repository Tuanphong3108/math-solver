<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cymath Portal - Math Solver Hub</title>
    <!-- Tải Material Symbols để dùng icon chất lượng cao -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <!-- Tải file manifest PWA để trình duyệt nhận diện ứng dụng -->
    <link rel="manifest" href="manifest.json">
    <style>
        /* CSS Tổng Thể & Reset */
        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden; /* Quan trọng để tránh thanh cuộn dư thừa */
            font-family: 'Inter', sans-serif;
            background-color: #f0f4f8; /* Nền nhẹ nhàng */
        }

        /* --- THANH ĐIỀU HƯỚNG (NAV BAR) --- */
        header#navbar {
            display: flex;
            align-items: center;
            justify-content: flex-start;
            height: 64px; /* Chiều cao cố định của thanh Nav Bar */
            background-color: #1A497A; /* Màu xanh đậm, đồng bộ với theme PWA */
            color: #ffffff;
            padding: 0 16px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            position: relative;
            z-index: 10; /* Đảm bảo Nav Bar luôn ở trên cùng */
        }

        .nav-button {
            display: flex;
            align-items: center;
            padding: 8px 16px;
            margin-right: 12px;
            border-radius: 8px;
            text-decoration: none;
            color: #ffffff;
            transition: background-color 0.2s, transform 0.1s;
            font-weight: 600;
        }

        .nav-button .material-symbols-outlined {
            margin-right: 6px;
            font-size: 20px;
        }

        /* Nút ACTIVE (Trang hiện tại) */
        .nav-button.active {
            background-color: rgba(255, 255, 255, 0.2);
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2) inset;
        }

        /* Hiệu ứng Hover */
        .nav-button:not(.active):hover {
            background-color: rgba(255, 255, 255, 0.1);
        }
        
        /* Hiệu ứng Click */
        .nav-button:active {
            transform: scale(0.98);
        }

        /* --- KHUNG NHÚNG (IFRAME) VÀ CONTAINER --- */
        #iframe-container {
            width: 100%;
            /* Chiếm toàn bộ không gian còn lại (100% viewport height trừ đi Nav Bar height) */
            height: calc(100% - 64px); 
            position: relative;
        }

        #cymath-frame {
            border: none;
            width: 100%;
            height: 100%;
            display: block;
            /* Thiết lập tối ưu full web (xóa mọi ràng buộc căn giữa/chiều rộng) */
            min-width: 100%; 
        }

        /* --- SPLASH SCREEN (Màn hình chờ load) --- */
        #splash-overlay {
            position: absolute;
            top: 0; /* Bắt đầu ngay dưới Nav Bar, do Container đã đặt top=0 và height = calc(100% - 64px) */
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #1A497A;
            color: #ffffff;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            transition: opacity 0.5s ease-out; /* Hiệu ứng ẩn mờ */
            z-index: 20; /* Luôn cao hơn Iframe */
            pointer-events: all; /* Ngăn chặn tương tác khi đang hiển thị */
            opacity: 1;
        }

        #splash-overlay.hidden {
            opacity: 0;
            pointer-events: none; /* Cho phép tương tác khi đã ẩn */
        }

        .splash-icon {
            font-size: 80px;
            margin-bottom: 16px;
            animation: pulse 1.5s infinite; /* Thêm hiệu ứng nhịp nhàng */
        }

        .splash-text {
            font-size: 18px;
            font-weight: 500;
        }

        @keyframes pulse {
            0% { transform: scale(1); opacity: 0.8; }
            50% { transform: scale(1.1); opacity: 1; }
            100% { transform: scale(1); opacity: 0.8; }
        }
    </style>
</head>
<body>
    <header id="navbar">
        <!-- Nút ACTIVE (Portal hiện tại) -->
        <a href="https://tuanphong3108.github.io/math-solver/index.html" class="nav-button active" title="Trang Chủ Cymath Portal">
            <span class="material-symbols-outlined">calculate</span>
            Cymath
        </a>

        <!-- Nút Chuyển Đổi Đơn Vị (Sẽ load ngay trong cùng cửa sổ PWA) -->
        <a href="https://tuanphong3108.github.io/math-solver/unit_converter.html" class="nav-button" title="Mở Bộ Chuyển Đổi Đơn Vị (Dự án riêng)">
            <span class="material-symbols-outlined">swap_horiz</span>
            Chuyển đổi đơn vị
        </a>
    </header>

    <div id="iframe-container">
        <!-- Lớp phủ Splash Screen - Chỉ hiện khi đang load iframe -->
        <div id="splash-overlay">
            <span class="material-symbols-outlined splash-icon">calculate</span>
            <span class="splash-text">Đang tải Cymath Portal...</span>
        </div>

        <!-- Khung nhúng Cymath (Có khả năng bị chặn X-Frame-Options) -->
        <iframe 
            id="cymath-frame" 
            src="https://www.cymath.com/" 
            title="Cymath Math Solver"
            onload="hideSplash()"
        ></iframe>
    </div>

    <script>
        // --- LOGIC ẨN SPLASH SCREEN SAU KHI IFRAME LOAD XONG ---
        // Lưu ý: Sự kiện 'onload' của iframe chỉ kích hoạt khi iframe load thành công.
        // Nếu Cymath chặn nhúng (X-Frame-Options), sự kiện này vẫn có thể kích hoạt, 
        // nhưng iframe sẽ hiển thị lỗi thay vì nội dung.
        function hideSplash() {
            const overlay = document.getElementById('splash-overlay');
            // Dùng setTimeout để đảm bảo hiệu ứng ẩn (opacity transition) hoạt động mượt mà
            setTimeout(() => {
                overlay.classList.add('hidden');
            }, 100); 
            console.log('Cymath iframe load finished. Splash hidden.');
        }

        // --- Cảnh báo nếu Cymath bị chặn (Đề phòng trường hợp iframe bị chặn nhưng onload vẫn bắn) ---
        // Phần này phức tạp và có thể không hoạt động do giới hạn bảo mật của iframe.
        // Chỉ dùng để debug, giữ lại logic chính: onload sẽ ẩn splash.
    </script>
</body>
</html>
